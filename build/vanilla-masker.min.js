!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.VanillaMasker=b()}(this,function(){var a=[9,16,17,18,36,37,38,39,40,91,92,93],b=function(b){for(var c=0,d=a.length;d>c;c++)if(b==a[c])return!1;return!0},c=function(a){this.elements=a};return c.prototype.unbindElementToMask=function(){for(var a=0,b=this.elements.length;b>a;a++)this.elements[a].lastOutput="",this.elements[a].onkeyup=!1,this.elements[a].onkeydown=!1,this.elements[a].value.length&&(this.elements[a].value=this.elements[a].value.replace(/\D/g,""))},c.prototype.bindElementToMask=function(a){for(var c=this,d=function(d){d=d||window.event;var e=d.target||d.srcElement;b(d.keyCode)&&setTimeout(function(){c.opts.lastOutput=e.lastOutput,e.value=VMasker[a](e.value,c.opts),e.lastOutput=e.value,e.setSelectionRange&&c.opts.suffixUnit&&e.setSelectionRange(e.value.length,e.value.length-c.opts.suffixUnit.length)},0)},e=0,f=this.elements.length;f>e;e++)this.elements[e].lastOutput="",this.elements[e].onkeyup=d,this.elements[e].value.length&&(this.elements[e].value=VMasker[a](this.elements[e].value,this.opts))},c.prototype.maskMoney=function(a){this.opts=a,this.bindElementToMask("toMoney")},c.prototype.maskNumber=function(){this.opts={},this.bindElementToMask("toNumber")},c.prototype.maskAlphaNum=function(){this.opts={},this.bindElementToMask("toAlphaNumeric")},c.prototype.maskPattern=function(a){this.opts={pattern:a},this.bindElementToMask("toPattern")},c.prototype.unMask=function(){this.unbindElementToMask()},c});var VMasker=function(a){if(!a)throw new Error("VanillaMasker: There is no element to bind.");var b="length"in a?a.length?a:[]:[a];return new VanillaMasker(b)};VMasker.toAlphaNumeric=function(a){return a.toString().replace(/[^a-z0-9 ]+/i,"")},VMasker.toMoney=function(a,b){if(b=this.mergeMoneyOptions(b),b.zeroCents){b.lastOutput=b.lastOutput||"";var c="("+b.separator+"[0]{0,"+b.precision+"})",d=new RegExp(c,"g"),e=a.toString().replace(/[\D]/g,"").length||0,f=b.lastOutput.toString().replace(/[\D]/g,"").length||0;a=a.toString().replace(d,""),f>e&&(a=a.slice(0,a.length-1))}var g=a.toString().replace(/[\D]/g,""),h=new RegExp("^(0|\\"+b.delimiter+")"),i=new RegExp("(\\"+b.separator+")$"),j=g.substr(0,g.length-b.moneyPrecision),k=j.substr(0,j.length%3),l=new Array(b.precision+1).join("0");j=j.substr(j.length%3,j.length);for(var m=0,n=j.length;n>m;m++)m%3===0&&(k+=b.delimiter),k+=j[m];if(k=k.replace(h,""),k=k.length?k:"0",!b.zeroCents){var o=g.length-b.precision,p=g.substr(o,b.precision),q=p.length,r=b.precision>q?b.precision:q;l=(l+p).slice(-r)}var s=b.unit+k+b.separator+l+b.suffixUnit;return s.replace(i,"")},VMasker.mergeMoneyOptions=function(a){return a=a||{},a={precision:a.hasOwnProperty("precision")?a.precision:2,separator:a.separator||",",delimiter:a.delimiter||".",unit:a.unit&&a.unit.replace(/[\s]/g,"")+" "||"",suffixUnit:a.suffixUnit&&" "+a.suffixUnit.replace(/[\s]/g,"")||"",zeroCents:a.zeroCents,lastOutput:a.lastOutput},a.moneyPrecision=a.zeroCents?0:a.precision,a},VMasker.toNumber=function(a){return a.toString().replace(/(?!^-)[^0-9]/g,"")},VMasker.toPattern=function(a,b){var c,d="object"==typeof b?b.pattern:b,e=d.replace(/\W/g,""),f=d.split(""),g=a.toString().replace(/\W/g,""),h=g.replace(/\W/g,""),i=0,j=f.length,k="object"==typeof b?b.placeholder:void 0;for(c=0;j>c;c++){if(i>=g.length){if(e.length==h.length)return f.join("");if(void 0!==k&&e.length>h.length)return this.addPlaceholdersToOutput(f,c,k).join("");break}if(f[c]===this.keys.digit&&g[i].match(/[0-9]/)||f[c]===this.keys.alpha&&g[i].match(/[a-zA-Z]/)||f[c]===this.keys.alphanum&&g[i].match(/[0-9a-zA-Z]/))f[c]=g[i++];else if(f[c]===this.keys.digit||f[c]===this.keys.alpha||f[c]===this.keys.alphanum)return void 0!==k?this.addPlaceholdersToOutput(f,c,k).join(""):f.slice(0,c).join("")}return f.join("").substr(0,c)},VMasker.addPlaceholdersToOutput=function(a,b,c){for(;b<a.length;b++)(a[b]===this.keys.digit||a[b]===this.keys.alpha||a[b]===this.keys.alphanum)&&(a[b]=c);return a},VMasker.keys={digit:"9",alpha:"A",alphanum:"S"};